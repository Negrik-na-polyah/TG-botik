<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            user-select: none;
            margin-top: 50px;
        }
        #score { font-size: 60px; font-weight: bold; }
        #click_btn {
            width: 200px; height: 200px; border-radius: 50%; border: none;
            background: #e67e22; color: white; font-size: 24px;
            cursor: pointer; margin-top: 20px;
            box-shadow: 0 10px #d35400;
        }
    </style>
</head>
<body>
    <div id="score">0</div>
    <button id="click_btn">КЛИК!</button>

    <script>
        // Проверка загрузки скрипта
        window.onload = function() {
            let tg = window.Telegram.WebApp;
            tg.expand();
            
            let count = 0;
            const scoreDisplay = document.getElementById('score');
            const btn = document.getElementById('click_btn');

            if (!btn) {
                alert("Кнопка не найдена! Проверь ID в HTML");
                return;
            }

            btn.addEventListener('click', function() {
                count++;
                scoreDisplay.innerText = count;
                
                // Легкая вибрация
                if (tg.HapticFeedback) {
                    tg.HapticFeedback.impactOccurred('medium');
                }

                if (count >= 5) {
                    tg.MainButton.text = "ЗАБРАТЬ ОЧКИ";
                    tg.MainButton.show();
                }
            });

            tg.MainButton.onClick(function() {
                tg.sendData(count.toString());
            });
        };
    </script>
</body>
</html>