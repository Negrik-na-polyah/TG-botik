<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            user-select: none;
        }
        #score { font-size: 60px; font-weight: bold; margin-top: 40px; }
        #click_btn {
            width: 220px; height: 220px; border-radius: 50%; border: none;
            background: linear-gradient(145deg, #f1c40f, #f39c12);
            color: white; font-size: 30px; font-weight: bold;
            cursor: pointer; margin-top: 40px;
            box-shadow: 0 10px #d35400; transition: 0.1s;
        }
        #click_btn:active { box-shadow: 0 4px #d35400; transform: translateY(6px); }
    </style>
</head>
<body>
    <div id="score">0</div>
    <button id="click_btn">КЛИК!</button>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        let count = 0;
        const scoreDisplay = document.getElementById('score');
        const btn = document.getElementById('click_btn');

        // Проверка: нашелся ли элемент в HTML?
        if (!btn) {
            alert("Ошибка: Кнопка с id='click_btn' не найдена!");
        }

        tg.MainButton.setParams({
            text: "ЗАБРАТЬ ОЧКИ",
            color: "#2ecc71"
        });

        btn.addEventListener('click', () => {
            count++;
            scoreDisplay.innerText = count; // Обновляем цифру на экране
            
            tg.HapticFeedback.impactOccurred('medium'); // Вибрация

            if (count >= 5) { 
                tg.MainButton.show();
            }
        });

        tg.MainButton.onClick(() => {
            tg.sendData(count.toString());
        });
    </script>
</body>
</html>